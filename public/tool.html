<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HACK SEXY-V1.0.26</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Orbitron:wght@500;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="tool.css">
    <link rel="stylesheet" href="mobile.css">
</head>
<body>
    <!-- MODAL THÔNG BÁO RESET BÀN -->
    <div id="resetModalOverlay" class="custom-modal-overlay">
        <div class="custom-modal-box">
            <div class="modal-title" style="color: #ff003c;">⚠️ BÀN ĐÃ KẾT THÚC</div>
            <p style="color: #fff; margin: 15px 0; line-height: 1.6;">
                Bàn cược này đã hoàn thành và bắt đầu một ván mới. Để đảm bảo tính chính xác của thuật toán, vui lòng quay lại sảnh và chọn một bàn khác.
            </p>
            <div class="modal-actions" style="margin-top: 20px;">
                <button id="returnToLobbyBtn" class="btn-modal btn-confirm" style="background: #ff003c; box-shadow: 0 0 15px #ff003c;">QUAY VỀ SẢNH</button>
            </div>
        </div>
    </div>

    <!-- Hiệu ứng nền Matrix & Grid -->
    <canvas id="matrixCanvas"></canvas>
    <div class="cyber-grid-bg"></div>

    <div class="hacker-layout">
        
        <!-- HEADER -->
        <header class="sys-header">
            <div class="brand-box">
                <span style="background:#ff003c; color:#fff; padding:3px 8px; font-weight:bold; border-radius:2px; font-size:0.8rem;">SEXY</span>
                <span style="color:#fff; font-family:'Orbitron'; font-size:1.1rem; margin-left:5px;">// HỆ THỐNG AI V1.0.26</span>
            </div>
            
            <h1 id="tableNameDisplay" class="glitch-text" style="font-size:1.4rem; margin:0;">ĐANG KẾT NỐI...</h1>
            
            <div class="sys-status">
                <span style="border:1px solid #00ff41; padding:5px 10px; color:#00ff41; font-size:0.8rem; border-radius:4px; background:rgba(0,50,0,0.5);">
                    TOKEN: <span id="headerTokenDisplay" style="font-weight:bold; color:#fff;">ĐANG TẢI...</span>
                </span>
                <button onclick="window.location.href='index.html'" style="background:#333; color:#fff; border:1px solid #555; padding:6px 15px; cursor:pointer; margin-left:10px; border-radius:4px; font-weight:bold; font-family:'Orbitron';">THOÁT</button>
            </div>
        </header>

        <!-- PANEL TRÁI: LOG HỆ THỐNG -->
        <aside class="panel-left">
            <div style="color:#00ff41; border-bottom:1px solid #333; margin-bottom:5px; font-weight:bold; font-size:0.9rem;">>> NHẬT KÝ HỆ THỐNG</div>
            <div class="log-window" id="systemLog" style="flex:1; overflow-y:auto; font-size:0.7rem; color:#cfc;"></div>
        </aside>

        <!-- CENTER: KHU VỰC GAME -->
        <main class="game-center">
            <canvas id="cardRain"></canvas>

            <div class="battle-wrapper">
                <div class="side-container p-side"></div>
                <div class="vs-container">
                    <div class="vs-ring"></div>
                    <div class="vs-text" data-text="VS">VS</div>
                </div>
                <div class="side-container b-side"></div>
            </div>

            <div class="prediction-wrapper">
                <div class="ai-box">
                    <img src="robot.png" class="ai-img" alt="AI" onerror="this.style.display='none'">
                </div>
                <div class="pred-info">
                    <div class="pred-label" id="aiAdvice">HỆ THỐNG ĐANG PHÂN TÍCH...</div>
                    <div class="pred-result blink-wait" id="aiPredText">ĐANG CHỜ</div>
                    
                    <div class="stats-wrapper">
                        <div class="stat-box player-stat">
                            <div class="stat-value" id="playerWins">0</div>
                            <div class="stat-label">PLAYER</div>
                        </div>
                        <div class="stat-box tie-stat">
                            <div class="stat-value" id="tieWins">0</div>
                            <div class="stat-label">HÒA</div>
                        </div>
                        <div class="stat-box banker-stat">
                            <div class="stat-value" id="bankerWins">0</div>
                            <div class="stat-label">BANKER</div>
                        </div>
                    </div>
                    <div id="prediction-history-icons" class="history-icons-wrapper">
    <!-- Các icon sẽ được JS chèn vào đây -->
</div>
                </div>

                <!-- ============================================= -->
                <!-- === START: GAUGE NÂNG CẤP (V2)            === -->
                <!-- ============================================= -->
                <div class="pred-gauge" id="predGauge">
    <svg class="gauge-svg" viewBox="0 0 120 120">
        <!-- Vòng nền mờ -->
        <circle class="gauge-bg" cx="60" cy="60" r="54"></circle>
        
        <!-- Vòng quét xoay tròn (Scanner Effect) -->
        <circle class="gauge-scanner" cx="60" cy="60" r="54"></circle>
        
        <!-- Vòng hiển thị % thực tế -->
        <circle class="gauge-fill" id="gaugeFill" cx="60" cy="60" r="54"></circle>
    </svg>
    
    <!-- Số % có hiệu ứng -->
    <div class="gauge-text-wrapper">
        <div class="gauge-text" id="gaugeValue">0<span class="percent-sign">%</span></div>
        <div class="gauge-label">CONFIDENCE</div>
    </div>
</div>
                <!-- ============================================= -->
                <!-- === END: GAUGE NÂNG CẤP (V2)              === -->
                <!-- ============================================= -->

            </div>
        </main>

        <!-- PANEL PHẢI: TỈ LỆ & MATRIX -->
        <aside class="panel-right">
            <!-- THANH TRẠNG THÁI MỚI -->
            <div class="matrix-status-bar">
                <span>STATUS: <span class="status-ok">SECURE_LINK</span></span>
                <span class="blinking-cursor">_</span>
            </div>
            
            <div class="matrix-header">
                >> ĐANG XÂM NHẬP GIẢI MÃ...
            </div>
            <div id="matrixCode"></div>
        </aside>

        <!-- FOOTER: CHIA 3 CỘT -->
         <footer class="sys-footer">
            <div id="predictionHistoryPanel" class="footer-panel">
                <div class="panel-label">LỊCH SỬ PHIÊN</div>
                <div class="history-table-container">
                    <div style="text-align: center; padding-top: 50px; color: #666;">Đang chờ dữ liệu phiên...</div>
                </div>
            </div>
            <div id="beadPlatePanel" class="footer-panel bead-panel">
                <div class="panel-label">BẢNG CẦU HẠT</div>
                <div id="beadPlateGrid" class="bead-grid"></div>
            </div>
            <div id="bigRoadPanel" class="footer-panel road-panel">
                <div class="panel-label">BẢNG CẦU LỚN</div>
                <div class="road-container" id="bigRoadGrid"></div>
            </div>
        </footer>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>