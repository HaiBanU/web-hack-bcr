<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HACK SEXY - V1.0.26</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <!-- Font chữ -->
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@500;900&display=swap" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="tool.css">
    <link rel="stylesheet" href="mobile.css">
</head>
<body>
    <!-- MODAL THÔNG BÁO RESET BÀN -->
    <div id="resetModalOverlay" class="custom-modal-overlay">
        <div class="custom-modal-box">
            <div class="modal-title" style="color: #ff003c;">⚠️ BÀN ĐÃ KẾT THÚC</div>
            <p style="color: #fff; margin: 15px 0; line-height: 1.6;">
                Bàn cược này đã hoàn thành và bắt đầu một ván mới. Để đảm bảo tính chính xác của thuật toán, vui lòng quay lại sảnh và chọn một bàn khác.
            </p>
            <div class="modal-actions" style="margin-top: 20px;">
                <button id="returnToLobbyBtn" class="btn-modal btn-confirm" style="background: #ff003c; box-shadow: 0 0 15px #ff003c;">QUAY VỀ SẢNH</button>
            </div>
        </div>
    </div>

    <!-- Hiệu ứng nền Matrix & Grid -->
    <canvas id="matrixCanvas"></canvas>
    <div class="cyber-grid-bg"></div>

    <div class="hacker-layout">
        
        <!-- HEADER -->
        <header class="sys-header">
            <div class="brand-box">
                <span style="background:#ff003c; color:#fff; padding:3px 8px; font-weight:bold; border-radius:2px; font-size:0.8rem;">SEXY</span>
                <span style="color:#fff; font-family:'Orbitron'; font-size:1.1rem; margin-left:5px;">// HỆ THỐNG AI V1.0.26</span>
            </div>
            
            <h1 id="tableNameDisplay" class="glitch-text" style="font-size:1.4rem; margin:0;">ĐANG KẾT NỐI...</h1>
            
            <div class="sys-status">
                <span style="border:1px solid #00ff41; padding:5px 10px; color:#00ff41; font-size:0.8rem; border-radius:4px; background:rgba(0,50,0,0.5);">
                    TOKEN: <span id="headerTokenDisplay" style="font-weight:bold; color:#fff;">ĐANG TẢI...</span>
                </span>
                <button onclick="window.location.href='index.html'" style="background:#333; color:#fff; border:1px solid #555; padding:6px 15px; cursor:pointer; margin-left:10px; border-radius:4px; font-weight:bold; font-family:'Orbitron';">THOÁT</button>
            </div>
        </header>

        <!-- PANEL TRÁI: LOG HỆ THỐNG -->
        <aside class="panel-left">
            <div style="color:#00ff41; border-bottom:1px solid #333; margin-bottom:5px; font-weight:bold; font-size:0.9rem;">>> NHẬT KÝ HỆ THỐNG</div>
            <div class="log-window" id="systemLog" style="flex:1; overflow-y:auto; font-size:0.7rem; color:#cfc;"></div>
        </aside>

        <!-- CENTER: KHU VỰC GAME -->
        <main class="game-center">
            <canvas id="cardRain"></canvas>

            <!-- Khu vực bài (Player vs Banker) -->
            <div class="battle-wrapper">
                <!-- PLAYER SIDE -->
                <div class="side-container p-side">
                    <!-- NỘI DUNG SẼ ĐƯỢC JS TẠO RA -->
                </div>
                
                <!-- Cụm VS mới với hiệu ứng tia sét -->
                <div class="vs-container">
                    <div class="vs-ring"></div>
                    <div class="vs-text" data-text="VS">VS</div>
                </div>

                <!-- BANKER SIDE -->
                <div class="side-container b-side">
                    <!-- NỘI DUNG SẼ ĐƯỢC JS TẠO RA -->
                </div>
            </div>

            <!-- KHUNG DỰ ĐOÁN & ROBOT -->
            <div class="prediction-wrapper">
                <div class="ai-box">
                    <img src="robot.png" class="ai-img" alt="AI" onerror="this.style.display='none'">
                </div>
                <div class="pred-info">
                    <div class="pred-label" id="aiAdvice">HỆ THỐNG ĐANG PHÂN TÍCH...</div>
                    <div class="pred-result blink-wait" id="aiPredText">ĐANG CHỜ</div>
                </div>
                <div class="pred-gauge">
                    <div class="gauge-circle">
                        <svg viewBox="0 0 36 36" class="circular-chart">
                            <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                            <path class="circle" id="gaugePath" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                        </svg>
                        <div class="gauge-text" id="gaugeValue">0%</div>
                    </div>
                </div>
            </div>

            <!-- KHỐI THỐNG KÊ MỚI -->
            <div class="stats-wrapper">
                <!-- Player Stats -->
                <div class="stat-box player-stat">
                    <div class="stat-value" id="playerWins">0</div>
                    <div class="stat-label">PLAYER</div>
                </div>
                <!-- Tie Stats -->
                <div class="stat-box tie-stat">
                    <div class="stat-value" id="tieWins">0</div>
                    <div class="stat-label">HÒA</div>
                </div>
                <!-- Banker Stats -->
                <div class="stat-box banker-stat">
                    <div class="stat-value" id="bankerWins">0</div>
                    <div class="stat-label">BANKER</div>
                </div>
            </div>
            
        </main>

        <!-- PANEL PHẢI: TỈ LỆ & MATRIX -->
        <aside class="panel-right">
            <div style="margin-bottom:15px;">
                <div style="display:flex; justify-content:space-between; font-size:0.8rem; margin-bottom:5px;">
                    <span style="color:#00f3ff;">PLAYER</span> <span id="confP">50%</span>
                </div>
                <div style="background:#222; height:8px; border-radius:4px;"><div id="barP" style="height:100%; background:#00f3ff; width:50%;"></div></div>
            </div>
            <div>
                <div style="display:flex; justify-content:space-between; font-size:0.8rem; margin-bottom:5px;">
                    <span style="color:#ff003c;">BANKER</span> <span id="confB">50%</span>
                </div>
                <div style="background:#222; height:8px; border-radius:4px;"><div id="barB" style="height:100%; background:#ff003c; width:50%;"></div></div>
            </div>
            <div id="matrixCode" style="margin-top:auto; font-size:0.6rem; color:#0f0; word-break:break-all; opacity:0.5; font-family:monospace; height:150px; overflow:hidden;"></div>
        </aside>

        <!-- FOOTER: CHIA 4 CỘT -->
        <footer class="sys-footer">
            
            <!-- CỘT 1: BIỂU ĐỒ SÓNG -->
            <div id="waveTrendPanel" class="footer-panel chart-panel">
                <div class="panel-label">XU HƯỚNG SÓNG</div>
                <canvas id="trendChart"></canvas>
            </div>

            <!-- CỘT 2: CẦU GIỌT NƯỚC -->
            <div id="beadPlatePanel" class="footer-panel bead-panel">
                <div class="panel-label">BẢNG CẦU HẠT</div>
                <div id="beadPlateGrid" class="bead-grid"></div>
            </div>

            <!-- CỘT 3: CẦU LỚN -->
            <div id="bigRoadPanel" class="footer-panel road-panel">
                <div class="panel-label">BẢNG CẦU LỚN</div>
                <div class="road-container" id="bigRoadGrid"></div>
            </div>

            <!-- CỘT 4: GIAO DỊCH -->
            <div id="transLogPanel" class="footer-panel trans-panel">
                <div class="panel-label">GIAO DỊCH</div>
                <div id="transLog" class="trans-log-content"></div>
            </div>

        </footer>
    </div>
    
    
    <!-- Load Socket.io -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>